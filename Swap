
function populateDeviceTable(details, historyData) {
    const tableBody = document.getElementById('device-table').getElementsByTagName('tbody')[0];
    tableBody.innerHTML = ''; // Clear existing rows

    if (details) {
        ['cameras', 'archivers', 'controllers', 'servers'].forEach(deviceType => {
            details[deviceType]?.forEach(device => {
                const deviceIp = device.ip_address;
                const deviceName = device[deviceType.slice(0, -1) + 'name'];
                const deviceCategory = deviceType.slice(0, -1).toUpperCase();
                
                const deviceHistory = historyData[deviceIp] || [];
                const lastStatusEntry = deviceHistory.length > 0 ? deviceHistory[deviceHistory.length - 1] : null;
                const currentStatus = lastStatusEntry ? lastStatusEntry.status : "Unknown";
                
                const row = tableBody.insertRow();
                row.innerHTML = `
                    <td>${deviceIp}</td>
                    <td>${deviceName}</td>
                    <td>${deviceCategory}</td>
                    <td id="uptime-${deviceIp}">0h/0m/0s</td>
                    <td id="downtime-count-${deviceIp}">0</td>
                    <td id="downtime-${deviceIp}">0h/0m/0s</td>
                    <td><button onclick="openDeviceHistory('${deviceIp}')">View History</button></td>
                    <td id="remark-${deviceIp}">Device working properly</td>
                `;

                if (currentStatus === "Online") {
                    startUptime(deviceIp, deviceHistory);
                } else {
                    startDowntime(deviceIp, deviceHistory);
                }
            });
        });
    } else {
        console.error('No details found in the response');
    }
}




Above is my previos function for populateDeviceTable

and recntly you suggest me below 

Adjust code and give me Updated function





function populateDeviceTable(data) {
    let tableBody = document.getElementById("device-table-body");
    tableBody.innerHTML = ""; // Clear old data
    
    data.forEach(device => {
        let row = document.createElement("tr");
        row.innerHTML = `
            <td>${device.name}</td>
            <td id="uptime-${device.ip}">Loading...</td>
        `;
        tableBody.appendChild(row);
    });

    // Ensure table is populated before calling startUptime()
    setTimeout(() => {
        data.forEach(device => startUptime(device.ip, device.history));
    }, 1000);
}




