// Function to open the device history modal and display details
function openDeviceHistory(ipAddress) {
    // Fetch device history data from API
    fetch(`http://localhost/api/device/history/${ipAddress}`)
        .then(response => response.json())
        .then(data => {
            displayDeviceHistory(data.history);
        })
        .catch(error => {
            console.error('Error fetching device history:', error);
        });

    // Show the modal
    document.getElementById('device-history-modal').style.display = 'block';
}

// Function to display device history inside the modal
function displayDeviceHistory(history) {
    const historyContainer = document.getElementById('device-history');
    historyContainer.innerHTML = ''; // Clear previous data

    if (history && history.length > 0) {
        history.forEach(entry => {
            const entryDiv = document.createElement('div');
            entryDiv.innerHTML = `<p><strong>${new Date(entry.timestamp).toLocaleString()}</strong> - ${entry.status}</p>`;
            historyContainer.appendChild(entryDiv);
        });
    } else {
        historyContainer.innerHTML = '<p>No history available</p>';
    }
}

// Function to close the modal
function closeHistoryModal() {
    document.getElementById('device-history-modal').style.display = 'none';
}



